cart-demo.html
<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cart Demo</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
<style>
  body{font-family:system-ui;background:#0f1318;color:#e6e6e6;margin:0}
  .btn{border:1px solid #444;background:#1b1f26;color:#e6e6e6;border-radius:8px;padding:.5rem .8rem;cursor:pointer}
  .btn:disabled{opacity:.6;cursor:not-allowed}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;padding:16px}
  .card{background:#151a21;border:1px solid #2a2f37;border-radius:12px;padding:12px}
  .price{font-weight:700}

  /* 浮動購物車按鈕 */
  #fabShop{
    position:fixed;right:16px;bottom:16px;z-index:8000;
    width:56px;height:56px;border-radius:50%;display:grid;place-items:center;
    background:#3b82f6;border:none;color:#fff;font-size:22px;box-shadow:0 8px 30px #0008
  }
  #fabShop .badge-dot{
    position:absolute;top:-4px;right:-4px;background:#ef4444;color:#fff;
    border-radius:999px;font-size:12px;line-height:18px;min-width:18px;height:18px;
    display:grid;place-items:center;padding:0 4px;border:2px solid #0f1318
  }

  /* 購物車面板 + 遮罩 */
  .cart-mask{
    position:fixed;inset:0;background:#0008;opacity:0;pointer-events:none;transition:.25s;z-index:8800
  }
  .cart-mask.open{opacity:1;pointer-events:auto}

  .cart-panel{
    position:fixed;top:0;right:0;height:100vh;width:360px;background:#0f1318;
    border-left:1px solid #2a2f37;transform:translateX(100%);transition:.25s;z-index:8890;
    display:flex;flex-direction:column
  }
  .cart-panel.open{transform:none}
  .cart-head{padding:12px;border-bottom:1px solid #2a2f37;display:flex;justify-content:space-between;align-items:center}
  .cart-body{flex:1;overflow:auto;padding:12px}
  .cart-row{display:flex;justify-content:space-between;align-items:center;margin:.4rem 0}
  .cart-foot{border-top:1px solid #2a2f37;padding:12px}
  .qty{display:flex;gap:6px;align-items:center}
  .qty .btn{width:28px;height:28px;display:grid;place-items:center;padding:0}
</style>
</head>
<body>

<h2 style="padding:16px;margin:0">商品列表</h2>
<div class="grid" id="products"></div>

<!-- 浮動購物車按鈕 -->
<button id="fabShop" aria-label="購物車">
  <i class="bi bi-cart"></i>
  <span class="badge-dot" hidden>0</span>
</button>

<!-- 遮罩 + 面板 -->
<div id="cartMask" class="cart-mask"></div>
<div id="cartPanel" class="cart-panel" aria-hidden="true">
  <div class="cart-head">
    <div>購物車</div>
    <button id="cartClose" class="btn">關閉</button>
  </div>
  <div id="cartItems" class="cart-body"><div class="text-muted">尚無商品</div></div>
  <div class="cart-foot">
    <div class="cart-row"><div class="text-muted">小計</div><div id="cartSubtotal">NT$ 0</div></div>
    <div class="cart-row"><div class="text-muted">運費</div><div id="cartShipping">NT$ 0</div></div>
    <div class="cart-row"><div>合計</div><div id="cartTotal" style="font-weight:700">NT$ 0</div></div>
    <div class="cart-row" style="gap:8px">
      <button id="cartClear" class="btn" style="flex:1">清空</button>
      <button id="cartCheckout" class="btn" style="flex:1">結帳</button>
    </div>
  </div>
</div>

<script>
/* ===== 極簡購物車 (localStorage) + 面板開關 ===== */
const $ = s => document.querySelector(s);
const fmt = n => 'NT$ ' + (n|0).toLocaleString();
const CART_KEY = 'cart';
let cart = [];

function loadCart(){ try{ cart = JSON.parse(localStorage.getItem(CART_KEY)||'[]'); }catch{ cart=[]; } }
function saveCart(){ localStorage.setItem(CART_KEY, JSON.stringify(cart)); }
function badgeUpdate(){
  const b = $('#fabShop .badge-dot');
  const c = cart.reduce((s,i)=>s+i.qty,0);
  if(c>0){ b.hidden=false; b.textContent=c; } else { b.hidden=true; }
}
function renderCart(){
  const box = $('#cartItems');
  if(cart.length===0){ box.innerHTML = '<div class="text-muted">尚無商品</div>'; }
  else{
    box.innerHTML = cart.map(i=>`
      <div class="cart-row">
        <div>
          <div>${i.name}</div>
          <div class="text-muted" style="font-size:12px">SKU: ${i.sku}</div>
        </div>
        <div class="qty">
          <button class="btn" onclick="changeQty('${i.sku}',-1)">−</button>
          <div>${i.qty}</div>
          <button class="btn" onclick="changeQty('${i.sku}',+1)">＋</button>
        </div>
        <div>${fmt(i.price*i.qty)}</div>
      </div>
    `).join('');
  }
  const subtotal = cart.reduce((s,i)=>s+i.price*i.qty,0);
  const shipping = (subtotal===0 || subtotal>=2000) ? 0 : 100;
  $('#cartSubtotal').textContent = fmt(subtotal);
  $('#cartShipping').textContent = fmt(shipping);
  $('#cartTotal').textContent = fmt(subtotal+shipping);
  badgeUpdate();
}
function addToCart(p){
  const found = cart.find(i=>i.sku===p.sku);
  if(found) found.qty++; else cart.push({sku:p.sku,name:p.name,price:p.price,qty:1});
  saveCart(); renderCart();
}
function changeQty(sku,delta){
  const item = cart.find(i=>i.sku===sku); if(!item) return;
  item.qty += delta;
  if(item.qty<=0) cart = cart.filter(i=>i.sku!==sku);
  saveCart(); renderCart();
}

/* 面板開關 */
function openCart(){ $('#cartPanel').classList.add('open'); $('#cartMask').classList.add('open'); }
function closeCart(){ $('#cartPanel').classList.remove('open'); $('#cartMask').classList.remove('open'); }
$('#fabShop').addEventListener('click', openCart);
$('#cartClose').addEventListener('click', closeCart);
$('#cartMask').addEventListener('click', closeCart);
$('#cartClear').addEventListener('click', ()=>{ cart=[]; saveCart(); renderCart(); });
$('#cartCheckout').addEventListener('click', ()=>alert('這裡導向你的結帳流程'));

loadCart(); renderCart();

/* 渲染 6 個假商品（你可以換成真的） */
const PRODUCTS = [
  {sku:'LG-001', name:'立國工業手套 M', price:120},
  {sku:'LG-002', name:'立國工業手套 L', price:120},
  {sku:'LT-010', name:'立國安全帽',     price:980},
  {sku:'P-004',  name:'工地雨鞋',       price:560},
  {sku:'P-005',  name:'護目鏡',         price:199},
  {sku:'P-006',  name:'防割手套',       price:150},
];
$('#products').innerHTML = PRODUCTS.map(p=>`
  <div class="card">
    <div style="font-weight:600">${p.name}</div>
    <div class="text-muted" style="font-size:12px">SKU: ${p.sku}</div>
    <div class="price" style="margin:.5rem 0">${fmt(p.price)}</div>
    <button class="btn" onclick='addToCart(${JSON.stringify(p)})'>加入購物車</button>
  </div>
`).join('');
</script>
</body>
</html>
